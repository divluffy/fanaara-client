<!doctype html>
<html lang="en" dir="ltr" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>OtakuHub ‚Äî Feed</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Tailwind theme tokens -->
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            ink: { 950:"#070A14", 900:"#0B1020" },
            brand: {
              a:"#2BE4A7",  // mint
              b:"#2AD3FF",  // neon cyan
              c:"#8B5CF6",  // violet
              d:"#FF4FD8",  // magenta (sparingly)
            }
          },
          boxShadow: {
            glow: "0 18px 55px rgba(42,211,255,.18)",
            lift: "0 14px 36px rgba(2,6,23,.10)",
            liftDark: "0 18px 55px rgba(0,0,0,.42)",
          }
        }
      }
    }
  </script>

  <style>
    /* smoother, nicer scrollbars */
    .nice-scroll::-webkit-scrollbar { width: 10px; height: 10px; }
    .nice-scroll::-webkit-scrollbar-thumb { background: rgba(148,163,184,.35); border-radius: 999px; }
    .dark .nice-scroll::-webkit-scrollbar-thumb { background: rgba(148,163,184,.22); }
    .safe-pb { padding-bottom: calc(env(safe-area-inset-bottom) + 72px); } /* for mobile bottom bar */
    .safe-top { padding-top: env(safe-area-inset-top); }
    @media (min-width: 640px) { .safe-pb { padding-bottom: 0; } }

    /* tiny micro-anim */
    .pop { animation: pop .16s ease-out; }
    @keyframes pop { from { transform: scale(.98); opacity:.7 } to { transform: scale(1); opacity:1 } }
  </style>
</head>

<body class="h-full antialiased bg-slate-50 text-slate-900 dark:bg-ink-950 dark:text-slate-100">
  <!-- BG glow -->
  <div class="fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-[radial-gradient(900px_520px_at_80%_15%,rgba(42,211,255,.20),transparent_60%),radial-gradient(900px_520px_at_15%_90%,rgba(43,228,167,.14),transparent_55%),radial-gradient(700px_420px_at_60%_50%,rgba(139,92,246,.12),transparent_60%)]"></div>
    <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-slate-50 dark:to-ink-950"></div>
  </div>

  <!-- ===================== MOBILE TOP NAV ===================== -->
  <header class="sm:hidden sticky top-0 z-40 safe-top">
    <div class="mx-auto max-w-7xl px-3 pt-3">
      <div class="rounded-3xl border border-slate-200/70 bg-white/75 backdrop-blur-xl shadow-lift
                  dark:border-white/10 dark:bg-white/7 dark:shadow-liftDark">
        <div class="flex items-center gap-2 p-3">
          <button id="mobileMenuBtn" type="button" aria-label="Open menu"
                  class="grid h-11 w-11 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                         active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
            <!-- hamburger -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none">
              <path d="M5 7h14M5 12h14M5 17h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>

          <div class="flex items-center gap-2 min-w-0">
            <div class="h-11 w-11 rounded-2xl bg-gradient-to-br from-brand-a via-brand-b to-brand-c shadow-glow"></div>
            <div class="min-w-0">
              <div class="font-extrabold tracking-tight truncate leading-5">OtakuHub</div>
              <div class="text-[11px] text-slate-600 dark:text-slate-400 truncate">Feed ‚Ä¢ Anime ‚Ä¢ Manga</div>
            </div>
          </div>

          <div class="ms-auto flex items-center gap-2">
            <button id="themeBtnMobile" type="button" aria-label="Toggle theme"
                    class="grid h-11 w-11 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                           active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
              <span class="dark:hidden">‚òÄÔ∏è</span>
              <span class="hidden dark:inline">üåô</span>
            </button>

            <button id="mobileBell" type="button" aria-label="Notifications"
                    class="relative grid h-11 w-11 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                           active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
              <!-- bell -->
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none">
                <path d="M18 16v-5a6 6 0 1 0-12 0v5l-2 2h16l-2-2Z" stroke="currentColor" stroke-width="2"/>
                <path d="M10 20a2 2 0 0 0 4 0" stroke="currentColor" stroke-width="2" opacity=".9"/>
              </svg>
              <span class="absolute -top-1 -right-1 h-3 w-3 rounded-full bg-rose-500 shadow-[0_0_0_6px_rgba(244,63,94,.18)]"></span>
            </button>
          </div>
        </div>

        <!-- quick search row -->
        <div class="px-3 pb-3">
          <label class="relative block">
            <span class="sr-only">Search</span>
            <span class="pointer-events-none absolute inset-y-0 left-3 grid place-items-center text-slate-500 dark:text-slate-400">
              <!-- search -->
              <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none">
                <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
                <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </span>
            <input id="mobileSearch" placeholder="Search anime, manga, creators, groups‚Ä¶"
              class="w-full rounded-2xl border border-slate-200/70 bg-white/70 pl-11 pr-4 py-3 text-sm font-semibold
                     outline-none focus:ring-4 focus:ring-cyan-500/15 focus:border-cyan-500/30
                     dark:border-white/10 dark:bg-white/10 dark:focus:ring-cyan-400/15 dark:focus:border-cyan-400/30" />
          </label>
        </div>
      </div>
    </div>
  </header>

  <!-- ===================== MOBILE DRAWER ===================== -->
  <div id="drawer" class="fixed inset-0 z-50 hidden">
    <div id="drawerOverlay" class="absolute inset-0 bg-black/35 backdrop-blur-[2px]"></div>
    <div class="absolute left-0 top-0 h-full w-[86%] max-w-sm safe-top">
      <aside class="h-full rounded-r-3xl border border-slate-200/70 bg-white/90 backdrop-blur-xl shadow-lift
                    dark:border-white/10 dark:bg-ink-900/70 dark:shadow-liftDark overflow-hidden flex flex-col">
        <div class="p-4 border-b border-slate-200/70 dark:border-white/10 flex items-center gap-3">
          <div class="h-11 w-11 rounded-2xl bg-gradient-to-br from-brand-a via-brand-b to-brand-c shadow-glow"></div>
          <div class="min-w-0">
            <div class="font-extrabold tracking-tight truncate">OtakuHub</div>
            <div class="text-xs text-slate-600 dark:text-slate-400 truncate">Navigation</div>
          </div>
          <button id="drawerClose" class="ms-auto grid h-11 w-11 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                                         active:scale-[.98] transition dark:border-white/10 dark:bg-white/10"
                  aria-label="Close menu" type="button">
            <!-- X -->
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none">
              <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>

        <div class="flex-1 overflow-auto nice-scroll p-3">
          <div class="px-2 pt-2 pb-2 text-[11px] font-extrabold tracking-[.18em] uppercase text-slate-500 dark:text-slate-400">Pages</div>
          <nav class="space-y-1">
            <a href="#" data-tab="home" class="navItem group relative flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-emerald-500/25 bg-emerald-500/10
                                  dark:border-emerald-400/25 dark:bg-emerald-400/10">
              <span class="absolute right-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-a to-brand-b"></span>
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-300">üè†</span>
                <span class="font-extrabold truncate">Feed</span>
              </span>
              <span class="text-xs font-extrabold text-slate-600 dark:text-slate-300">Active</span>
            </a>

            <a href="#" data-tab="anime" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-violet-500/10 text-violet-600 dark:text-violet-300">üé¨</span>
                <span class="font-bold truncate">Anime</span>
              </span>
              <span class="text-xs font-extrabold text-slate-500 dark:text-slate-400">Browse</span>
            </a>

            <a href="#" data-tab="manga" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-amber-500/12 text-amber-600 dark:text-amber-300">üìñ</span>
                <span class="font-bold truncate">Manga</span>
              </span>
              <span class="text-xs font-extrabold text-slate-500 dark:text-slate-400">Chapters</span>
            </a>

            <a href="#" data-tab="comics" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-orange-500/12 text-orange-600 dark:text-orange-300">üìö</span>
                <span class="font-bold truncate">Comics</span>
              </span>
              <span class="text-xs font-extrabold text-slate-500 dark:text-slate-400">Panels</span>
            </a>
          </nav>

          <div class="px-2 pt-6 pb-2 text-[11px] font-extrabold tracking-[.18em] uppercase text-slate-500 dark:text-slate-400">Social</div>
          <nav class="space-y-1">
            <a href="#" data-tab="chats" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-300">üí¨</span>
                <span class="font-bold truncate">Chats</span>
              </span>
              <span class="rounded-full border border-emerald-500/25 bg-emerald-500/10 px-2.5 py-1 text-xs font-extrabold text-emerald-700 dark:text-emerald-200 dark:border-emerald-400/25 dark:bg-emerald-400/10">3</span>
            </a>

            <a href="#" data-tab="notifications" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-rose-500/10 text-rose-600 dark:text-rose-300">üîî</span>
                <span class="font-bold truncate">Notifications</span>
              </span>
              <span class="rounded-full border border-rose-500/25 bg-rose-500/10 px-2.5 py-1 text-xs font-extrabold text-rose-700 dark:text-rose-200 dark:border-rose-400/25 dark:bg-rose-400/10">12</span>
            </a>

            <a href="#" data-tab="ai" class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                                  border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                                  dark:hover:border-white/10 dark:hover:bg-white/5">
              <span class="flex items-center gap-3 min-w-0">
                <span class="grid h-10 w-10 place-items-center rounded-xl bg-sky-500/10 text-sky-600 dark:text-sky-300">‚ú®</span>
                <span class="font-bold truncate">AI Tools</span>
              </span>
              <span class="text-xs font-extrabold text-slate-500 dark:text-slate-400">Pro</span>
            </a>
          </nav>
        </div>

        <div class="p-4 border-t border-slate-200/70 dark:border-white/10">
          <div class="rounded-3xl border border-slate-200/70 bg-white/70 px-3 py-3 shadow-lift
                      dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
            <div class="flex items-center gap-3">
              <div class="h-12 w-12 rounded-2xl overflow-hidden border border-slate-200/70 bg-slate-100
                          dark:border-white/10 dark:bg-white/10">
                <img src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=128&h=128&fit=crop"
                     class="h-full w-full object-cover" alt="avatar">
              </div>
              <div class="min-w-0 flex-1">
                <div class="font-extrabold truncate">dev.luffy</div>
                <div class="text-xs text-slate-600 dark:text-slate-400 truncate">@otakuhub</div>
              </div>
              <button id="openComposerFromDrawer"
                      class="grid h-12 w-12 place-items-center rounded-2xl bg-gradient-to-l from-brand-a via-brand-b to-brand-c text-ink-950 shadow-glow
                             active:scale-[.98] transition" aria-label="New post" type="button">
                ‚ûï
              </button>
            </div>
          </div>
        </div>

      </aside>
    </div>
  </div>

  <!-- ===================== DESKTOP LAYOUT WRAPPER ===================== -->
  <div class="min-h-screen safe-pb sm:p-4">
    <div class="mx-auto max-w-7xl grid gap-4 lg:grid-cols-[320px_1fr]">

      <!-- ===================== DESKTOP ASIDE ===================== -->
      <aside class="hidden sm:block lg:sticky lg:top-4 lg:h-[calc(100vh-2rem)]">
        <div class="h-full rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift
                    dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark overflow-hidden flex flex-col">

          <div class="p-4 border-b border-slate-200/70 dark:border-white/10">
            <div class="flex items-center gap-3">
              <div class="h-11 w-11 rounded-2xl bg-gradient-to-br from-brand-a via-brand-b to-brand-c shadow-glow"></div>
              <div class="min-w-0">
                <div class="font-extrabold tracking-tight truncate">OtakuHub</div>
                <div class="text-xs text-slate-600 dark:text-slate-400 truncate">Anime ‚Ä¢ Manga ‚Ä¢ Comics Community</div>
              </div>

              <button id="themeBtn"
                class="ms-auto inline-flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2 text-xs font-bold
                       hover:-translate-y-[1px] transition active:scale-[.98]
                       dark:border-white/10 dark:bg-white/10"
                type="button" aria-label="Toggle theme">
                <span class="hidden md:inline">Theme</span>
                <span class="grid h-7 w-7 place-items-center rounded-xl bg-slate-900 text-white dark:bg-white dark:text-slate-900">
                  <span class="dark:hidden">‚òÄÔ∏è</span>
                  <span class="hidden dark:inline">üåô</span>
                </span>
              </button>
            </div>

            <!-- desktop search -->
            <div class="mt-3">
              <label class="relative block">
                <span class="sr-only">Search</span>
                <span class="pointer-events-none absolute inset-y-0 left-3 grid place-items-center text-slate-500 dark:text-slate-400">
                  <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none">
                    <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/>
                    <path d="M16.5 16.5 21 21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </span>
                <input id="desktopSearch" placeholder="Search anime, manga, posts‚Ä¶"
                  class="w-full rounded-2xl border border-slate-200/70 bg-white/70 pl-11 pr-4 py-3 text-sm font-semibold
                         outline-none focus:ring-4 focus:ring-cyan-500/15 focus:border-cyan-500/30
                         dark:border-white/10 dark:bg-white/10 dark:focus:ring-cyan-400/15 dark:focus:border-cyan-400/30" />
              </label>
            </div>
          </div>

          <div class="flex-1 overflow-auto nice-scroll p-3">
            <div class="px-2 pt-2 pb-2 text-[11px] font-extrabold tracking-[.18em] uppercase text-slate-500 dark:text-slate-400">
              Pages
            </div>

            <nav class="space-y-1">
              <a href="#" data-tab="home"
                 class="navItem group relative flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-emerald-500/25 bg-emerald-500/10
                        dark:border-emerald-400/25 dark:bg-emerald-400/10 hover:-translate-y-[1px] transition">
                <span class="absolute right-2 top-2 bottom-2 w-1 rounded-full bg-gradient-to-b from-brand-a to-brand-b"></span>
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-300">üè†</span>
                  <span class="font-extrabold truncate">Feed</span>
                </span>
                <span class="rounded-full border border-slate-200/70 bg-white/70 px-2.5 py-1 text-xs font-extrabold text-slate-700
                             dark:border-white/10 dark:bg-white/10 dark:text-slate-200">
                  Active
                </span>
              </a>

              <a href="#" data-tab="anime"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-violet-500/10 text-violet-600 dark:text-violet-300">üé¨</span>
                  <span class="font-bold truncate">Anime</span>
                </span>
                <span class="rounded-full border border-slate-200/70 bg-white/70 px-2.5 py-1 text-xs font-extrabold text-slate-700
                             dark:border-white/10 dark:bg-white/10 dark:text-slate-200">Browse</span>
              </a>

              <a href="#" data-tab="manga"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-amber-500/12 text-amber-600 dark:text-amber-300">üìñ</span>
                  <span class="font-bold truncate">Manga</span>
                </span>
                <span class="rounded-full border border-slate-200/70 bg-white/70 px-2.5 py-1 text-xs font-extrabold text-slate-700
                             dark:border-white/10 dark:bg-white/10 dark:text-slate-200">Chapters</span>
              </a>

              <a href="#" data-tab="comics"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-orange-500/12 text-orange-600 dark:text-orange-300">üìö</span>
                  <span class="font-bold truncate">Comics</span>
                </span>
                <span class="rounded-full border border-slate-200/70 bg-white/70 px-2.5 py-1 text-xs font-extrabold text-slate-700
                             dark:border-white/10 dark:bg-white/10 dark:text-slate-200">Panels</span>
              </a>

              <a href="#" data-tab="wallpapers"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-cyan-500/10 text-cyan-600 dark:text-cyan-300">üñºÔ∏è</span>
                  <span class="font-bold truncate">Wallpapers</span>
                </span>
                <span class="rounded-full border border-slate-200/70 bg-white/70 px-2.5 py-1 text-xs font-extrabold text-slate-700
                             dark:border-white/10 dark:bg-white/10 dark:text-slate-200">New</span>
              </a>
            </nav>

            <div class="px-2 pt-6 pb-2 text-[11px] font-extrabold tracking-[.18em] uppercase text-slate-500 dark:text-slate-400">
              Social
            </div>

            <nav class="space-y-1">
              <a href="#" data-tab="chats"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="relative grid h-10 w-10 place-items-center rounded-xl bg-emerald-500/10 text-emerald-600 dark:text-emerald-300">üí¨</span>
                  <span class="font-bold truncate">Chats</span>
                </span>
                <span class="rounded-full border border-emerald-500/25 bg-emerald-500/10 px-2.5 py-1 text-xs font-extrabold text-emerald-700
                             dark:text-emerald-200 dark:border-emerald-400/25 dark:bg-emerald-400/10">3</span>
              </a>

              <a href="#" data-tab="notifications"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-rose-500/10 text-rose-600 dark:text-rose-300">üîî</span>
                  <span class="font-bold truncate">Notifications</span>
                </span>
                <span class="rounded-full border border-rose-500/25 bg-rose-500/10 px-2.5 py-1 text-xs font-extrabold text-rose-700
                             dark:text-rose-200 dark:border-rose-400/25 dark:bg-rose-400/10">12</span>
              </a>

              <a href="#" data-tab="ai"
                 class="navItem group flex items-center justify-between gap-3 rounded-2xl px-3 py-2.5
                        border border-transparent hover:border-slate-200/70 hover:bg-slate-900/[0.03]
                        dark:hover:border-white/10 dark:hover:bg-white/5 hover:-translate-y-[1px] transition">
                <span class="flex items-center gap-3 min-w-0">
                  <span class="grid h-10 w-10 place-items-center rounded-xl bg-sky-500/10 text-sky-600 dark:text-sky-300">‚ú®</span>
                  <span class="font-bold truncate">AI Tools</span>
                </span>
                <span class="rounded-full border border-sky-500/25 bg-sky-500/10 px-2.5 py-1 text-xs font-extrabold text-sky-700
                             dark:text-sky-200 dark:border-sky-400/25 dark:bg-sky-400/10">Pro</span>
              </a>
            </nav>
          </div>

          <div class="p-4 border-t border-slate-200/70 dark:border-white/10">
            <div class="rounded-3xl border border-slate-200/70 bg-white/70 px-3 py-3 shadow-lift
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="flex items-center gap-3">
                <div class="h-12 w-12 rounded-2xl overflow-hidden border border-slate-200/70 bg-slate-100
                            dark:border-white/10 dark:bg-white/10">
                  <img src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?w=128&h=128&fit=crop"
                       class="h-full w-full object-cover" alt="avatar">
                </div>
                <div class="min-w-0 flex-1">
                  <div class="font-extrabold truncate">dev.luffy</div>
                  <div class="text-xs text-slate-600 dark:text-slate-400 truncate">@otakuhub</div>
                </div>

                <button id="openComposerDesktop"
                        class="grid h-12 w-12 place-items-center rounded-2xl bg-gradient-to-l from-brand-a via-brand-b to-brand-c text-ink-950 shadow-glow
                               hover:-translate-y-[1px] active:scale-[.98] transition"
                        aria-label="New post" type="button">
                  ‚ûï
                </button>
              </div>
            </div>
          </div>

        </div>
      </aside>

      <!-- ===================== MAIN ===================== -->
      <main class="min-h-[calc(100vh-2rem)]">

        <!-- Desktop header -->
        <header class="hidden sm:block rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift
                       dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark p-4">
          <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div class="min-w-0">
              <h1 id="pageTitle" class="text-xl font-extrabold tracking-tight">Feed ‚ú®</h1>
              <p id="pageSubtitle" class="text-sm text-slate-600 dark:text-slate-400">
                Latest posts, discussions, fan art, and chapter drops.
              </p>
            </div>

            <div class="flex items-center gap-2">
              <button id="filterTrending"
                      class="filterBtn rounded-2xl px-4 py-3 font-extrabold text-slate-900
                             border border-slate-200/70 bg-white/70 hover:-translate-y-[1px] active:scale-[.98] transition
                             dark:text-slate-100 dark:border-white/10 dark:bg-white/10"
                      type="button">
                üî• Trending
              </button>
              <button id="filterFollowing"
                      class="filterBtn rounded-2xl px-4 py-3 font-extrabold text-slate-900
                             border border-slate-200/70 bg-white/70 hover:-translate-y-[1px] active:scale-[.98] transition
                             dark:text-slate-100 dark:border-white/10 dark:bg-white/10"
                      type="button">
                üë• Following
              </button>
              <button id="openComposerHeader"
                      class="rounded-2xl px-4 py-3 font-extrabold text-ink-950
                             bg-gradient-to-l from-brand-a via-brand-b to-brand-c shadow-glow
                             hover:-translate-y-[1px] active:scale-[.98] transition"
                      type="button">
                ‚ûï New Post
              </button>
            </div>
          </div>
        </header>

        <!-- Content grid -->
        <div class="mt-4 grid gap-4 lg:grid-cols-[1fr_360px]">

          <!-- FEED -->
          <section class="space-y-4">
            <!-- Stories row -->
            <div class="rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift p-4
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="flex items-center justify-between">
                <h2 class="font-extrabold">Hot right now</h2>
                <button id="refreshBtn"
                        class="rounded-2xl px-3 py-2 text-xs font-extrabold border border-slate-200/70 bg-white/70
                               hover:-translate-y-[1px] active:scale-[.98] transition
                               dark:border-white/10 dark:bg-white/10">
                  ‚Üª Refresh
                </button>
              </div>

              <div class="mt-3 flex gap-2 overflow-auto nice-scroll pb-1">
                <!-- story pills -->
                <button class="storyPill shrink-0 flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
                  <span class="h-8 w-8 rounded-xl bg-gradient-to-br from-brand-a to-brand-b grid place-items-center text-ink-950 font-extrabold">A</span>
                  <span class="text-sm font-extrabold">Art</span>
                </button>
                <button class="storyPill shrink-0 flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
                  <span class="h-8 w-8 rounded-xl bg-violet-500/15 grid place-items-center font-extrabold text-violet-700 dark:text-violet-200">OP</span>
                  <span class="text-sm font-extrabold">Theories</span>
                </button>
                <button class="storyPill shrink-0 flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
                  <span class="h-8 w-8 rounded-xl bg-amber-500/15 grid place-items-center font-extrabold text-amber-700 dark:text-amber-200">üìñ</span>
                  <span class="text-sm font-extrabold">Chapters</span>
                </button>
                <button class="storyPill shrink-0 flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
                  <span class="h-8 w-8 rounded-xl bg-cyan-500/15 grid place-items-center font-extrabold text-cyan-700 dark:text-cyan-200">üñºÔ∏è</span>
                  <span class="text-sm font-extrabold">Wallpapers</span>
                </button>
                <button class="storyPill shrink-0 flex items-center gap-2 rounded-2xl border border-slate-200/70 bg-white/70 px-3 py-2
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
                  <span class="h-8 w-8 rounded-xl bg-rose-500/15 grid place-items-center font-extrabold text-rose-700 dark:text-rose-200">üî•</span>
                  <span class="text-sm font-extrabold">Top</span>
                </button>
              </div>
            </div>

            <!-- Composer teaser -->
            <div class="rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift p-4
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="flex items-center gap-3">
                <div class="h-11 w-11 rounded-2xl bg-slate-200/70 dark:bg-white/10 grid place-items-center font-extrabold">
                  D
                </div>

                <button id="openComposer"
                        class="flex-1 text-left rounded-2xl border border-slate-200/70 bg-white/70 px-4 py-3 text-sm text-slate-600
                               hover:-translate-y-[1px] active:scale-[.99] transition
                               dark:border-white/10 dark:bg-white/10 dark:text-slate-300">
                  What are you watching/reading today? üß†
                </button>

                <button id="quickMedia"
                        class="hidden sm:inline-flex rounded-2xl px-4 py-3 font-extrabold
                               border border-slate-200/70 bg-white/70 hover:-translate-y-[1px] active:scale-[.98] transition
                               dark:border-white/10 dark:bg-white/10"
                        type="button">
                  üñºÔ∏è Media
                </button>
              </div>

              <div class="mt-3 flex flex-wrap gap-2">
                <button class="chip rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200">
                  #SpoilerFree
                </button>
                <button class="chip rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200">
                  #FanArt
                </button>
                <button class="chip rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                               hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200">
                  #ChapterTalk
                </button>
                <span class="ms-auto text-xs text-slate-500 dark:text-slate-400 font-semibold">
                  Tip: press <b>/</b> to search
                </span>
              </div>
            </div>

            <!-- Post card 1 -->
            <article class="post rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift
                            dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark overflow-hidden">
              <div class="p-4">
                <div class="flex items-start justify-between gap-3">
                  <div class="flex items-center gap-3 min-w-0">
                    <div class="h-11 w-11 rounded-2xl bg-gradient-to-br from-brand-a to-brand-b text-ink-950 grid place-items-center font-extrabold">
                      A
                    </div>
                    <div class="min-w-0">
                      <div class="font-extrabold truncate">Aki_Draws <span class="text-slate-500 dark:text-slate-400 font-semibold">@aki</span></div>
                      <div class="text-xs text-slate-600 dark:text-slate-400">2h ‚Ä¢ Fan Art ‚Ä¢ üé®</div>
                    </div>
                  </div>

                  <span class="shrink-0 rounded-full border border-fuchsia-500/25 bg-fuchsia-500/10 px-3 py-1 text-xs font-extrabold text-fuchsia-700
                               dark:text-fuchsia-200 dark:border-fuchsia-400/25 dark:bg-fuchsia-400/10">
                    #Art
                  </span>
                </div>

                <p class="mt-3 text-sm leading-7 text-slate-800 dark:text-slate-200">
                  Finished a neon version of <b>JJK</b> vibes ‚ú® ‚Äî should I upload a wallpaper pack?
                </p>

                <div class="mt-4 rounded-2xl border border-slate-200/70 bg-slate-100/70 h-56
                            dark:border-white/10 dark:bg-white/10 grid place-items-center">
                  <div class="text-center">
                    <div class="text-slate-500 dark:text-slate-400 text-sm font-bold">Media Preview üñºÔ∏è</div>
                    <div class="text-xs text-slate-500/80 dark:text-slate-400/80 mt-1">Drag & drop support (coming)</div>
                  </div>
                </div>

                <div class="mt-4 flex flex-wrap items-center gap-2">
                  <button class="actBtn likeBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10"
                          data-count="214" aria-pressed="false">
                    ‚ù§Ô∏è <span class="count">214</span>
                  </button>

                  <button class="actBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10"
                          type="button">
                    üí¨ 38
                  </button>

                  <button class="actBtn saveBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10"
                          aria-pressed="false" type="button">
                    üîñ <span class="saveLabel">Save</span>
                  </button>

                  <span class="ms-auto text-xs text-slate-500 dark:text-slate-400 font-semibold">
                    Spoiler-free ‚úÖ
                  </span>
                </div>
              </div>
            </article>

            <!-- Post card 2 -->
            <article class="post rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift
                            dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="p-4">
                <div class="flex items-start justify-between gap-3">
                  <div class="flex items-center gap-3 min-w-0">
                    <div class="h-11 w-11 rounded-2xl bg-slate-200/70 dark:bg-white/10 grid place-items-center font-extrabold">
                      K
                    </div>
                    <div class="min-w-0">
                      <div class="font-extrabold truncate">KaitoReads <span class="text-slate-500 dark:text-slate-400 font-semibold">@kaito</span></div>
                      <div class="text-xs text-slate-600 dark:text-slate-400">6h ‚Ä¢ Manga ‚Ä¢ üìñ</div>
                    </div>
                  </div>

                  <span class="shrink-0 rounded-full border border-amber-500/25 bg-amber-500/10 px-3 py-1 text-xs font-extrabold text-amber-700
                               dark:text-amber-200 dark:border-amber-400/25 dark:bg-amber-400/10">
                    #Chapter
                  </span>
                </div>

                <p class="mt-3 text-sm leading-7 text-slate-800 dark:text-slate-200">
                  New chapter drop ‚Äî pacing is üî•. What‚Äôs your rating (no spoilers)?
                </p>

                <div class="mt-4 flex flex-wrap gap-2">
                  <button class="rateBtn rounded-full border border-slate-200/70 bg-white/70 px-3 py-1 text-xs font-extrabold text-slate-700
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10 dark:text-slate-200">‚≠ê 9/10</button>
                  <button class="rateBtn rounded-full border border-slate-200/70 bg-white/70 px-3 py-1 text-xs font-extrabold text-slate-700
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10 dark:text-slate-200">üß† Theory</button>
                  <button class="rateBtn rounded-full border border-slate-200/70 bg-white/70 px-3 py-1 text-xs font-extrabold text-slate-700
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10 dark:text-slate-200">‚öîÔ∏è Action</button>
                </div>

                <div class="mt-4 flex flex-wrap items-center gap-2">
                  <button class="actBtn likeBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10"
                          data-count="88" aria-pressed="false">
                    üëç <span class="count">88</span>
                  </button>
                  <button class="actBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10">
                    üí¨ 12
                  </button>
                  <button class="actBtn rounded-2xl px-3 py-2 text-sm font-extrabold border border-slate-200/70 bg-white/70
                                 hover:-translate-y-[1px] active:scale-[.98] transition
                                 dark:border-white/10 dark:bg-white/10">
                    üîÅ Share
                  </button>

                  <span class="ms-auto text-xs text-slate-500 dark:text-slate-400 font-semibold">
                    No spoilers please üôè
                  </span>
                </div>
              </div>
            </article>
          </section>

          <!-- RIGHT PANEL (Desktop only) -->
          <aside class="hidden lg:block space-y-4">
            <div class="rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift p-4
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="flex items-center justify-between">
                <h3 class="font-extrabold">Trending üî•</h3>
                <span class="text-xs text-slate-500 dark:text-slate-400 font-semibold">Today</span>
              </div>

              <div class="mt-3 space-y-2">
                <a class="block rounded-2xl border border-slate-200/70 bg-white/70 p-3 hover:-translate-y-[1px] transition
                           dark:border-white/10 dark:bg-white/10" href="#">
                  <div class="font-extrabold">üéå Best Openings</div>
                  <div class="text-xs text-slate-600 dark:text-slate-400">1.2k posts</div>
                </a>
                <a class="block rounded-2xl border border-slate-200/70 bg-white/70 p-3 hover:-translate-y-[1px] transition
                           dark:border-white/10 dark:bg-white/10" href="#">
                  <div class="font-extrabold">üñºÔ∏è AMOLED Wallpapers</div>
                  <div class="text-xs text-slate-600 dark:text-slate-400">540 posts</div>
                </a>
                <a class="block rounded-2xl border border-slate-200/70 bg-white/70 p-3 hover:-translate-y-[1px] transition
                           dark:border-white/10 dark:bg-white/10" href="#">
                  <div class="font-extrabold">‚öîÔ∏è Power Rankings</div>
                  <div class="text-xs text-slate-600 dark:text-slate-400">320 posts</div>
                </a>
              </div>
            </div>

            <div class="rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift p-4
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <h3 class="font-extrabold">Suggested Groups üë•</h3>

              <div class="mt-3 space-y-2">
                <div class="rounded-2xl border border-slate-200/70 bg-white/70 p-3 dark:border-white/10 dark:bg-white/10">
                  <div class="flex items-center justify-between gap-2">
                    <div class="min-w-0">
                      <div class="font-extrabold truncate">JJK Fans</div>
                      <div class="text-xs text-slate-600 dark:text-slate-400 truncate">Active ‚Ä¢ 18k members</div>
                    </div>
                    <button class="rounded-2xl px-3 py-2 text-xs font-extrabold text-ink-950
                                   bg-gradient-to-l from-brand-a to-brand-b hover:-translate-y-[1px] active:scale-[.98] transition">
                      Join
                    </button>
                  </div>
                </div>

                <div class="rounded-2xl border border-slate-200/70 bg-white/70 p-3 dark:border-white/10 dark:bg-white/10">
                  <div class="flex items-center justify-between gap-2">
                    <div class="min-w-0">
                      <div class="font-extrabold truncate">One Piece Theories</div>
                      <div class="text-xs text-slate-600 dark:text-slate-400 truncate">New ‚Ä¢ 9k members</div>
                    </div>
                    <button class="rounded-2xl px-3 py-2 text-xs font-extrabold border border-slate-200/70 bg-white/70
                                   hover:-translate-y-[1px] active:scale-[.98] transition
                                   dark:border-white/10 dark:bg-white/10">
                      Follow
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <div class="rounded-3xl border border-slate-200/70 bg-white/70 backdrop-blur-xl shadow-lift p-4
                        dark:border-white/10 dark:bg-white/5 dark:shadow-liftDark">
              <div class="flex items-center justify-between">
                <h3 class="font-extrabold">Your Stats üìä</h3>
                <span class="text-xs text-slate-500 dark:text-slate-400 font-semibold">This week</span>
              </div>
              <div class="mt-3 grid grid-cols-3 gap-2">
                <div class="rounded-2xl border border-slate-200/70 bg-white/70 p-3 text-center dark:border-white/10 dark:bg-white/10">
                  <div class="text-lg font-extrabold">12</div>
                  <div class="text-[11px] text-slate-600 dark:text-slate-400 font-semibold">Groups</div>
                </div>
                <div class="rounded-2xl border border-slate-200/70 bg-white/70 p-3 text-center dark:border-white/10 dark:bg-white/10">
                  <div class="text-lg font-extrabold">3</div>
                  <div class="text-[11px] text-slate-600 dark:text-slate-400 font-semibold">Messages</div>
                </div>
                <div class="rounded-2xl border border-slate-200/70 bg-white/70 p-3 text-center dark:border-white/10 dark:bg-white/10">
                  <div class="text-lg font-extrabold">214</div>
                  <div class="text-[11px] text-slate-600 dark:text-slate-400 font-semibold">Likes</div>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </main>
    </div>
  </div>

  <!-- ===================== MOBILE BOTTOM NAV (FOOTER ICONS) ===================== -->
  <footer class="sm:hidden fixed bottom-0 left-0 right-0 z-40">
    <div class="mx-auto max-w-7xl px-3 pb-3" style="padding-bottom: calc(env(safe-area-inset-bottom) + 12px);">
      <div class="rounded-3xl border border-slate-200/70 bg-white/80 backdrop-blur-xl shadow-lift
                  dark:border-white/10 dark:bg-white/7 dark:shadow-liftDark">
        <nav class="grid grid-cols-5 gap-1 p-2">
          <button data-tab="home" class="bottomTab tabActive flex flex-col items-center justify-center gap-1 rounded-2xl py-2 active:scale-[.99] transition"
                  aria-label="Home">
            <span class="grid h-10 w-10 place-items-center rounded-2xl bg-emerald-500/10 text-emerald-700 dark:text-emerald-200">üè†</span>
            <span class="text-[11px] font-extrabold text-slate-700 dark:text-slate-200">Home</span>
          </button>

          <button data-tab="explore" class="bottomTab flex flex-col items-center justify-center gap-1 rounded-2xl py-2 active:scale-[.99] transition"
                  aria-label="Explore">
            <span class="grid h-10 w-10 place-items-center rounded-2xl border border-slate-200/70 bg-white/70 dark:border-white/10 dark:bg-white/10">üß≠</span>
            <span class="text-[11px] font-extrabold text-slate-600 dark:text-slate-300">Explore</span>
          </button>

          <button id="fabPost" class="flex flex-col items-center justify-center gap-1 rounded-2xl py-2 active:scale-[.99] transition"
                  aria-label="New post">
            <span class="grid h-11 w-11 place-items-center rounded-2xl bg-gradient-to-l from-brand-a via-brand-b to-brand-c text-ink-950 shadow-glow">‚ûï</span>
            <span class="text-[11px] font-extrabold text-slate-700 dark:text-slate-200">Post</span>
          </button>

          <button data-tab="chats" class="bottomTab flex flex-col items-center justify-center gap-1 rounded-2xl py-2 active:scale-[.99] transition"
                  aria-label="Chats">
            <span class="relative grid h-10 w-10 place-items-center rounded-2xl border border-slate-200/70 bg-white/70 dark:border-white/10 dark:bg-white/10">üí¨
              <span class="absolute -top-1 -right-1 h-3 w-3 rounded-full bg-emerald-500 shadow-[0_0_0_6px_rgba(16,185,129,.18)]"></span>
            </span>
            <span class="text-[11px] font-extrabold text-slate-600 dark:text-slate-300">Chats</span>
          </button>

          <button data-tab="profile" class="bottomTab flex flex-col items-center justify-center gap-1 rounded-2xl py-2 active:scale-[.99] transition"
                  aria-label="Profile">
            <span class="grid h-10 w-10 place-items-center rounded-2xl border border-slate-200/70 bg-white/70 dark:border-white/10 dark:bg-white/10">üë§</span>
            <span class="text-[11px] font-extrabold text-slate-600 dark:text-slate-300">Me</span>
          </button>
        </nav>
      </div>
    </div>
  </footer>

  <!-- ===================== COMPOSER MODAL ===================== -->
  <div id="composerModal" class="fixed inset-0 z-[60] hidden">
    <div id="composerOverlay" class="absolute inset-0 bg-black/40 backdrop-blur-[2px]"></div>
    <div class="absolute inset-x-0 bottom-0 sm:inset-0 sm:grid sm:place-items-center p-3 sm:p-6">
      <div class="w-full max-w-2xl rounded-3xl border border-slate-200/70 bg-white/90 backdrop-blur-xl shadow-lift
                  dark:border-white/10 dark:bg-ink-900/70 dark:shadow-liftDark overflow-hidden pop">
        <div class="p-4 border-b border-slate-200/70 dark:border-white/10 flex items-center gap-3">
          <div class="h-10 w-10 rounded-2xl bg-gradient-to-br from-brand-a via-brand-b to-brand-c shadow-glow"></div>
          <div class="min-w-0">
            <div class="font-extrabold">Create Post</div>
            <div class="text-xs text-slate-600 dark:text-slate-400 truncate">Keep it spoiler-free (use tags) ‚úÖ</div>
          </div>
          <button id="closeComposer"
                  class="ms-auto grid h-11 w-11 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                         active:scale-[.98] transition dark:border-white/10 dark:bg-white/10"
                  aria-label="Close" type="button">
            ‚úï
          </button>
        </div>

        <div class="p-4 space-y-3">
          <div class="flex flex-wrap gap-2">
            <button class="tagPick rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200"
                    data-tag="#FanArt">#FanArt</button>
            <button class="tagPick rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200"
                    data-tag="#Theory">#Theory</button>
            <button class="tagPick rounded-full border border-slate-200/70 bg-white/70 px-3 py-1.5 text-xs font-extrabold text-slate-700
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10 dark:text-slate-200"
                    data-tag="#ChapterTalk">#ChapterTalk</button>
            <button class="tagPick rounded-full border border-emerald-500/25 bg-emerald-500/10 px-3 py-1.5 text-xs font-extrabold text-emerald-700
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:text-emerald-200 dark:border-emerald-400/25 dark:bg-emerald-400/10"
                    data-tag="#SpoilerFree">#SpoilerFree</button>
          </div>

          <textarea id="composerText" rows="5"
                    class="w-full rounded-2xl border border-slate-200/70 bg-white/70 p-4 text-sm font-semibold text-slate-800
                           outline-none focus:ring-4 focus:ring-cyan-500/15 focus:border-cyan-500/30
                           dark:border-white/10 dark:bg-white/10 dark:text-slate-100 dark:focus:ring-cyan-400/15 dark:focus:border-cyan-400/30"
                    placeholder="Share your thoughts‚Ä¶ (no spoilers please üôè)"></textarea>

          <div class="flex flex-wrap items-center gap-2">
            <button id="attachBtn"
                    class="rounded-2xl px-4 py-3 font-extrabold border border-slate-200/70 bg-white/70
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
              üñºÔ∏è Add Media
            </button>
            <button id="emojiBtn"
                    class="rounded-2xl px-4 py-3 font-extrabold border border-slate-200/70 bg-white/70
                           hover:-translate-y-[1px] active:scale-[.98] transition dark:border-white/10 dark:bg-white/10">
              üôÇ Emoji
            </button>

            <div class="ms-auto flex items-center gap-2">
              <span id="charCount" class="text-xs font-extrabold text-slate-500 dark:text-slate-400">0 / 280</span>
              <button id="publishBtn"
                      class="rounded-2xl px-5 py-3 font-extrabold text-ink-950
                             bg-gradient-to-l from-brand-a via-brand-b to-brand-c shadow-glow
                             hover:-translate-y-[1px] active:scale-[.98] transition">
                Publish
              </button>
            </div>
          </div>

          <div id="fakeUpload" class="hidden rounded-2xl border border-slate-200/70 bg-white/70 p-4 text-sm font-bold text-slate-600
                                     dark:border-white/10 dark:bg-white/10 dark:text-slate-300">
            ‚úÖ Media attached (demo)
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== TOASTS ===================== -->
  <div id="toasts" class="fixed z-[80] right-3 top-3 sm:right-6 sm:top-6 space-y-2"></div>

  <script>
    // ========= THEME =========
    const root = document.documentElement;

    function applyTheme(theme) {
      const isDark = theme === "dark";
      root.classList.toggle("dark", isDark);
      localStorage.setItem("theme", isDark ? "dark" : "light");
    }

    // restore theme (saved > system)
    (function initTheme() {
      const saved = localStorage.getItem("theme");
      if (saved === "dark" || saved === "light") return applyTheme(saved);
      const prefersDark = window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches;
      applyTheme(prefersDark ? "dark" : "light");
    })();

    const themeBtn = document.getElementById("themeBtn");
    const themeBtnMobile = document.getElementById("themeBtnMobile");
    [themeBtn, themeBtnMobile].filter(Boolean).forEach(btn => {
      btn.addEventListener("click", () => {
        applyTheme(root.classList.contains("dark") ? "light" : "dark");
        toast("Theme updated", root.classList.contains("dark") ? "üåô Dark mode" : "‚òÄÔ∏è Light mode");
      });
    });

    // ========= TOAST =========
    const toasts = document.getElementById("toasts");
    function toast(title, desc) {
      const el = document.createElement("div");
      el.className =
        "pop w-[min(360px,calc(100vw-24px))] rounded-2xl border border-slate-200/70 bg-white/85 backdrop-blur-xl shadow-lift p-3 " +
        "dark:border-white/10 dark:bg-white/10 dark:shadow-liftDark";
      el.innerHTML = `
        <div class="flex gap-3">
          <div class="h-11 w-11 rounded-2xl bg-gradient-to-br from-brand-a via-brand-b to-brand-c shadow-glow grid place-items-center text-ink-950 font-extrabold">‚úì</div>
          <div class="min-w-0">
            <div class="font-extrabold truncate">${escapeHtml(title)}</div>
            <div class="text-sm text-slate-600 dark:text-slate-300 truncate">${escapeHtml(desc || "")}</div>
          </div>
          <button class="ms-auto grid h-10 w-10 place-items-center rounded-2xl border border-slate-200/70 bg-white/70
                         active:scale-[.98] transition dark:border-white/10 dark:bg-white/10" aria-label="Dismiss">‚úï</button>
        </div>
      `;
      el.querySelector("button").addEventListener("click", () => el.remove());
      toasts.appendChild(el);
      setTimeout(() => el.remove(), 2600);
    }

    function escapeHtml(str) {
      return (str ?? "").replace(/[&<>"']/g, (m) => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
    }

    // ========= MOBILE DRAWER =========
    const drawer = document.getElementById("drawer");
    const mobileMenuBtn = document.getElementById("mobileMenuBtn");
    const drawerOverlay = document.getElementById("drawerOverlay");
    const drawerClose = document.getElementById("drawerClose");

    function openDrawer() { drawer.classList.remove("hidden"); }
    function closeDrawer() { drawer.classList.add("hidden"); }

    if (mobileMenuBtn) mobileMenuBtn.addEventListener("click", openDrawer);
    if (drawerClose) drawerClose.addEventListener("click", closeDrawer);
    if (drawerOverlay) drawerOverlay.addEventListener("click", closeDrawer);

    // ========= COMPOSER MODAL =========
    const composerModal = document.getElementById("composerModal");
    const composerOverlay = document.getElementById("composerOverlay");
    const openComposerBtns = [
      document.getElementById("openComposer"),
      document.getElementById("openComposerHeader"),
      document.getElementById("openComposerDesktop"),
      document.getElementById("openComposerFromDrawer"),
      document.getElementById("fabPost"),
    ].filter(Boolean);

    const closeComposerBtn = document.getElementById("closeComposer");
    const composerText = document.getElementById("composerText");
    const charCount = document.getElementById("charCount");
    const publishBtn = document.getElementById("publishBtn");
    const attachBtn = document.getElementById("attachBtn");
    const emojiBtn = document.getElementById("emojiBtn");
    const fakeUpload = document.getElementById("fakeUpload");

    function openComposer() {
      composerModal.classList.remove("hidden");
      fakeUpload.classList.add("hidden");
      setTimeout(() => composerText.focus(), 30);
    }
    function closeComposer() {
      composerModal.classList.add("hidden");
    }

    openComposerBtns.forEach(b => b.addEventListener("click", () => {
      closeDrawer();
      openComposer();
    }));

    closeComposerBtn.addEventListener("click", closeComposer);
    composerOverlay.addEventListener("click", closeComposer);

    composerText.addEventListener("input", () => {
      const len = composerText.value.length;
      charCount.textContent = `${len} / 280`;
      charCount.classList.toggle("text-rose-600", len > 280);
      charCount.classList.toggle("dark:text-rose-300", len > 280);
    });

    document.querySelectorAll(".tagPick").forEach(btn => {
      btn.addEventListener("click", () => {
        const tag = btn.getAttribute("data-tag") || "";
        if (!composerText.value.includes(tag)) {
          composerText.value = `${tag} ${composerText.value}`.trim();
          composerText.dispatchEvent(new Event("input"));
        }
      });
    });

    attachBtn.addEventListener("click", () => {
      fakeUpload.classList.remove("hidden");
      toast("Attached", "Media added (demo)");
    });

    emojiBtn.addEventListener("click", () => {
      composerText.value += " ‚ú®";
      composerText.dispatchEvent(new Event("input"));
      composerText.focus();
    });

    publishBtn.addEventListener("click", () => {
      const text = composerText.value.trim();
      if (!text) return toast("Can‚Äôt publish", "Write something first üôÇ");
      if (text.length > 280) return toast("Too long", "Keep it under 280 chars");

      closeComposer();
      toast("Posted!", "Your post is live on the feed");
      composerText.value = "";
      composerText.dispatchEvent(new Event("input"));
    });

    // ========= INTERACTIONS (LIKE / SAVE / RATE) =========
    document.querySelectorAll(".likeBtn").forEach(btn => {
      btn.addEventListener("click", () => {
        const pressed = btn.getAttribute("aria-pressed") === "true";
        const base = Number(btn.getAttribute("data-count") || "0");
        const next = pressed ? base : base + 1;
        btn.setAttribute("aria-pressed", pressed ? "false" : "true");
        btn.querySelector(".count").textContent = String(next);
        btn.classList.toggle("border-rose-500/30", !pressed);
        btn.classList.toggle("bg-rose-500/10", !pressed);
        btn.classList.toggle("text-rose-700", !pressed);
        btn.classList.toggle("dark:text-rose-200", !pressed);
        btn.classList.toggle("dark:border-rose-400/25", !pressed);
        btn.classList.toggle("dark:bg-rose-400/10", !pressed);
        btn.classList.add("pop");
        setTimeout(() => btn.classList.remove("pop"), 160);
      });
    });

    document.querySelectorAll(".saveBtn").forEach(btn => {
      btn.addEventListener("click", () => {
        const pressed = btn.getAttribute("aria-pressed") === "true";
        btn.setAttribute("aria-pressed", pressed ? "false" : "true");
        btn.querySelector(".saveLabel").textContent = pressed ? "Save" : "Saved";
        toast(pressed ? "Removed" : "Saved", pressed ? "Bookmark removed" : "Added to bookmarks");
      });
    });

    document.querySelectorAll(".rateBtn").forEach(btn => {
      btn.addEventListener("click", () => {
        btn.classList.toggle("border-cyan-500/30");
        btn.classList.toggle("bg-cyan-500/10");
        btn.classList.toggle("text-cyan-700");
        btn.classList.toggle("dark:text-cyan-200");
        btn.classList.toggle("dark:border-cyan-400/25");
        btn.classList.toggle("dark:bg-cyan-400/10");
      });
    });

    // ========= TABS (mobile bottom + nav items) =========
    const pageTitle = document.getElementById("pageTitle");
    const pageSubtitle = document.getElementById("pageSubtitle");

    function setActiveTab(tab) {
      // bottom tabs
      document.querySelectorAll(".bottomTab").forEach(b => {
        const is = b.getAttribute("data-tab") === tab;
        b.classList.toggle("tabActive", is);
        const pill = b.querySelector("span:nth-child(1)");
        const label = b.querySelector("span:nth-child(2)");
        if (!pill || !label) return;
        if (is) {
          pill.className = "grid h-10 w-10 place-items-center rounded-2xl bg-emerald-500/10 text-emerald-700 dark:text-emerald-200";
          label.className = "text-[11px] font-extrabold text-slate-700 dark:text-slate-200";
        } else {
          pill.className = "grid h-10 w-10 place-items-center rounded-2xl border border-slate-200/70 bg-white/70 dark:border-white/10 dark:bg-white/10";
          label.className = "text-[11px] font-extrabold text-slate-600 dark:text-slate-300";
        }
      });

      // update header text (desktop)
      const map = {
        home: ["Feed ‚ú®", "Latest posts, discussions, fan art, and chapter drops."],
        anime: ["Anime üé¨", "Trailers, seasonal picks, and episode discussions."],
        manga: ["Manga üìñ", "New chapters, reviews, and spoiler-free ratings."],
        comics: ["Comics üìö", "Panels, recommendations, and creator spotlights."],
        wallpapers: ["Wallpapers üñºÔ∏è", "AMOLED packs, edits, and phone-ready crops."],
        chats: ["Chats üí¨", "DMs, group chats, and watch parties."],
        notifications: ["Notifications üîî", "Mentions, follows, and updates."],
        ai: ["AI Tools ‚ú®", "Smart summaries, tagging, and discovery."],
        explore: ["Explore üß≠", "Find new series, creators, and communities."],
        profile: ["Profile üë§", "Your posts, bookmarks, and settings."],
      };
      const [t, s] = map[tab] || map.home;
      if (pageTitle) pageTitle.textContent = t;
      if (pageSubtitle) pageSubtitle.textContent = s;

      toast("Switched", t);
    }

    document.querySelectorAll(".navItem").forEach(a => {
      a.addEventListener("click", (e) => {
        e.preventDefault();
        const tab = a.getAttribute("data-tab") || "home";
        setActiveTab(tab);
        closeDrawer();
      });
    });

    document.querySelectorAll(".bottomTab").forEach(b => {
      b.addEventListener("click", () => setActiveTab(b.getAttribute("data-tab") || "home"));
    });

    // ========= QUALITY OF LIFE =========
    // Press "/" to focus search
    window.addEventListener("keydown", (e) => {
      if (e.key === "/" && !e.metaKey && !e.ctrlKey && !e.altKey) {
        const active = document.activeElement;
        const isTyping = active && (active.tagName === "INPUT" || active.tagName === "TEXTAREA");
        if (isTyping) return;
        e.preventDefault();
        const s1 = document.getElementById("desktopSearch");
        const s2 = document.getElementById("mobileSearch");
        (s2 && !s2.closest(".hidden") ? s2 : s1)?.focus();
      }
      if (e.key === "Escape") {
        closeDrawer();
        closeComposer();
      }
    });

    // demo refresh
    const refreshBtn = document.getElementById("refreshBtn");
    refreshBtn?.addEventListener("click", () => {
      toast("Updated", "Feed refreshed (demo)");
    });

    // demo mobile bell
    document.getElementById("mobileBell")?.addEventListener("click", () => {
      toast("Notifications", "You have 12 new alerts");
    });

    // set default active tab
    setActiveTab("home");
  </script>
</body>
</html>
